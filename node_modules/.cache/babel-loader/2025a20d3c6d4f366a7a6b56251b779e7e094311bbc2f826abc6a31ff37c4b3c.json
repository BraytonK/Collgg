{"ast":null,"code":"var _jsxFileName = \"/Users/braytonkerekffy/Documents/Personal/Code/collgg/src/Modal.js\",\n  _s = $RefreshSig$();\nimport { useContext, useEffect, useState } from \"react\";\nimport { setDoc, uploadFile } from \"@junobuild/core\";\nimport { AuthContext } from \"./Auth\";\nimport { nanoid } from \"nanoid\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const Modal = () => {\n  _s();\n  const [showModal, setShowModal] = useState(false);\n  const [inputText, setInputText] = useState(\"\");\n  const [valid, setValid] = useState(false);\n  const [progress, setProgress] = useState(false);\n  const [file, setFile] = useState();\n  const {\n    user\n  } = useContext(AuthContext);\n  useEffect(() => {\n    setValid(inputText !== \"\" && user !== undefined && user !== null);\n  }, [showModal, inputText, user]);\n  const reload = () => {\n    let event = new Event(\"reload\");\n    window.dispatchEvent(event);\n  };\n  const add = async () => {\n    // Demo purpose therefore edge case not properly handled\n    if ([null, undefined].includes(user)) {\n      return;\n    }\n    setProgress(true);\n    try {\n      let url;\n      if (file !== undefined) {\n        const filename = `${user.key}-${file.name}`;\n        const {\n          downloadUrl\n        } = await uploadFile({\n          collection: \"images\",\n          data: file,\n          filename,\n          token: nanoid()\n        });\n        url = downloadUrl;\n      }\n      const key = nanoid();\n      await setDoc({\n        collection: \"notes\",\n        doc: {\n          key,\n          data: {\n            text: inputText,\n            ...(url !== undefined && {\n              url\n            })\n          }\n        }\n      });\n      setShowModal(false);\n      reload();\n    } catch (err) {\n      console.error(err);\n    }\n    setProgress(false);\n  };\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"mt-10 flex items-center justify-center gap-x-6\",\n      children: /*#__PURE__*/_jsxDEV(\"button\", {\n        type: \"button\",\n        onClick: () => setShowModal(true),\n        className: \"rounded-md bg-indigo-600 px-3.5 py-1.5 text-base font-semibold leading-7 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\",\n        children: \"Add a snippet\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 76,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 7\n    }, this), showModal ? /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"relative w-auto my-6 mx-auto max-w-3xl\",\n          children: /*#__PURE__*/_jsxDEV(\"div\", {\n            className: \"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\",\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"relative p-6 flex-auto\",\n              children: [/*#__PURE__*/_jsxDEV(\"textarea\", {\n                className: \" form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-indigo-600 focus:outline-none resize-none \",\n                rows: \"5\",\n                placeholder: \"Your snippet entry\",\n                onChange: e => {\n                  setInputText(e.target.value);\n                },\n                value: inputText,\n                disabled: progress\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 91,\n                columnNumber: 19\n              }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n                type: \"file\",\n                className: \"my-4 text-slate-500 text-lg leading-relaxed\",\n                onChange: event => {\n                  var _event$target$files;\n                  return setFile((_event$target$files = event.target.files) === null || _event$target$files === void 0 ? void 0 : _event$target$files[0]);\n                },\n                disabled: progress\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 118,\n                columnNumber: 19\n              }, this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 90,\n              columnNumber: 17\n            }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n              className: \"flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b\",\n              children: progress ? /*#__PURE__*/_jsxDEV(\"div\", {\n                className: \"animate-spin inline-block w-6 h-6 border-[3px] border-current border-t-transparent text-indigo-600 rounded-full\",\n                role: \"status\",\n                \"aria-label\": \"loading\",\n                children: /*#__PURE__*/_jsxDEV(\"span\", {\n                  className: \"sr-only\",\n                  children: \"Loading...\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 133,\n                  columnNumber: 23\n                }, this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 128,\n                columnNumber: 21\n              }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n                children: [/*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none ease-linear transition-all duration-150\",\n                  type: \"button\",\n                  onClick: () => setShowModal(false),\n                  children: \"Close\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 137,\n                  columnNumber: 23\n                }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n                  className: \"rounded-md bg-indigo-600 px-3.5 py-1.5 text-base font-semibold leading-7 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-25\",\n                  type: \"button\",\n                  onClick: add,\n                  disabled: !valid,\n                  children: \"Submit\"\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 145,\n                  columnNumber: 23\n                }, this)]\n              }, void 0, true)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 126,\n              columnNumber: 17\n            }, this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 89,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 88,\n          columnNumber: 13\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 87,\n        columnNumber: 11\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"opacity-25 fixed inset-0 z-40 bg-black\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 159,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true) : null]\n  }, void 0, true);\n};\n_s(Modal, \"IA4VjL0HSO9h+r0KQpZBrvEBYnU=\");\n_c = Modal;\nvar _c;\n$RefreshReg$(_c, \"Modal\");","map":{"version":3,"names":["useContext","useEffect","useState","setDoc","uploadFile","AuthContext","nanoid","jsxDEV","_jsxDEV","Fragment","_Fragment","Modal","_s","showModal","setShowModal","inputText","setInputText","valid","setValid","progress","setProgress","file","setFile","user","undefined","reload","event","Event","window","dispatchEvent","add","includes","url","filename","key","name","downloadUrl","collection","data","token","doc","text","err","console","error","children","className","type","onClick","fileName","_jsxFileName","lineNumber","columnNumber","rows","placeholder","onChange","e","target","value","disabled","_event$target$files","files","role","_c","$RefreshReg$"],"sources":["/Users/braytonkerekffy/Documents/Personal/Code/collgg/src/Modal.js"],"sourcesContent":["import { useContext, useEffect, useState } from \"react\";\nimport { setDoc, uploadFile } from \"@junobuild/core\";\nimport { AuthContext } from \"./Auth\";\nimport { nanoid } from \"nanoid\";\n\nexport const Modal = () => {\n  const [showModal, setShowModal] = useState(false);\n  const [inputText, setInputText] = useState(\"\");\n  const [valid, setValid] = useState(false);\n  const [progress, setProgress] = useState(false);\n  const [file, setFile] = useState();\n\n  const { user } = useContext(AuthContext);\n\n  useEffect(() => {\n    setValid(inputText !== \"\" && user !== undefined && user !== null);\n  }, [showModal, inputText, user]);\n\n  const reload = () => {\n    let event = new Event(\"reload\");\n    window.dispatchEvent(event);\n  };\n\n  const add = async () => {\n    // Demo purpose therefore edge case not properly handled\n    if ([null, undefined].includes(user)) {\n      return;\n    }\n\n    setProgress(true);\n\n    try {\n      let url;\n\n      if (file !== undefined) {\n        const filename = `${user.key}-${file.name}`;\n\n\n        const { downloadUrl } = await uploadFile({\n          collection: \"images\",\n          data: file,\n          filename,\n          token: nanoid(),\n        });\n\n        url = downloadUrl;\n      }\n\n      const key = nanoid();\n\n       await setDoc({\n         collection: \"notes\",\n         doc: {\n           key,\n           data: {\n             text: inputText, \n             ...(url !== undefined && { url }),\n           },\n         },\n       });\n\n\n      setShowModal(false);\n\n      reload();\n    } catch (err) {\n      console.error(err);\n    }\n\n    setProgress(false);\n  };\n\n  return (\n    <>\n      <div className=\"mt-10 flex items-center justify-center gap-x-6\">\n        <button\n          type=\"button\"\n          onClick={() => setShowModal(true)}\n          className=\"rounded-md bg-indigo-600 px-3.5 py-1.5 text-base font-semibold leading-7 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600\"\n        >\n          Add a snippet\n        </button>\n      </div>\n\n      {showModal ? (\n        <>\n          <div className=\"justify-center items-center flex overflow-x-hidden overflow-y-auto fixed inset-0 z-50 outline-none focus:outline-none\">\n            <div className=\"relative w-auto my-6 mx-auto max-w-3xl\">\n              <div className=\"border-0 rounded-lg shadow-lg relative flex flex-col w-full bg-white outline-none focus:outline-none\">\n                <div className=\"relative p-6 flex-auto\">\n                  <textarea\n                    className=\"\n        form-control\n        block\n        w-full\n        px-3\n        py-1.5\n        text-base\n        font-normal\n        text-gray-700\n        bg-white bg-clip-padding\n        border border-solid border-gray-300\n        rounded\n        transition\n        ease-in-out\n        m-0\n        focus:text-gray-700 focus:bg-white focus:border-indigo-600 focus:outline-none\n        resize-none\n      \"\n                    rows=\"5\"\n                    placeholder=\"Your snippet entry\"\n                    onChange={(e) => {\n                      setInputText(e.target.value);\n                    }}\n                    value={inputText}\n                    disabled={progress}\n                  ></textarea>\n                  <input\n                    type=\"file\"\n                    className=\"my-4 text-slate-500 text-lg leading-relaxed\"\n                    onChange={(event) => setFile(event.target.files?.[0])}\n                    disabled={progress}\n                  />\n                </div>\n\n                <div className=\"flex items-center justify-end p-6 border-t border-solid border-slate-200 rounded-b\">\n                  {progress ? (\n                    <div\n                      className=\"animate-spin inline-block w-6 h-6 border-[3px] border-current border-t-transparent text-indigo-600 rounded-full\"\n                      role=\"status\"\n                      aria-label=\"loading\"\n                    >\n                      <span className=\"sr-only\">Loading...</span>\n                    </div>\n                  ) : (\n                    <>\n                      <button\n                        className=\"background-transparent font-bold uppercase px-6 py-2 text-sm outline-none focus:outline-none ease-linear transition-all duration-150\"\n                        type=\"button\"\n                        onClick={() => setShowModal(false)}\n                      >\n                        Close\n                      </button>\n\n                      <button\n                        className=\"rounded-md bg-indigo-600 px-3.5 py-1.5 text-base font-semibold leading-7 text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600 disabled:opacity-25\"\n                        type=\"button\"\n                        onClick={add}\n                        disabled={!valid}\n                      >\n                        Submit\n                      </button>\n                    </>\n                  )}\n                </div>\n              </div>\n            </div>\n          </div>\n          <div className=\"opacity-25 fixed inset-0 z-40 bg-black\"></div>\n        </>\n      ) : null}\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}